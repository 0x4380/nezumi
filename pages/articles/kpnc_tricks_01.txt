====== kpnc_tricks_01 ======
<sub>{{kpnc_tricks_01.odt|Original file}}</sub>

====== трюки от мыщъха ======

крис касперски ака мыщъх

**короче, решил мыщъх завести свою колонку, чтобы валить всякую полезную (и не очень) мелочь по поводу и без. эта подборка получилась через чур железной и для мыщъха вообще не характерной, так что в следующий раз основной упор будет сделан на Си и прилегающие к нему языки.**

===== один LED на двоих =====

При подключении дополнительных винчестеров на внешних контроллеров (SCSI или IDE), возникают проблемы с индикацией. Светодиод — один и он уже занят материнской платой с основными IDE-контроллерами. Можно, конечно, просверлить в корпусе дырку и вывести наружу столько светодиодов, сколько потребуется, но это будет некрасиво и совсем не по-хакерски.

Воспользовавшись следующей схемой, мы сможем подключить к одному светодиоду практически неограниченное количество контроллеров:

{{kpnc_tricks_01_Image_0.png}}

Рисунок 1 подключение нескольких контроллеров к одному светодиоду

Для исключения "выгорания" контроллеров мы используем диоды Шоттки типа BAT46, которые можно содрать практически с любой материнской платы, оставшейся от апгрейда или купить в радиомагазине за копейки. Проверяя их целостность омметром не волнуйтесь, если стрелка не захочет отклоняться. Это свойство диода такое — открываться только при достижении определенного порогового напряжения. Вот необходимый даташит: http://ronja.twibright.com/datasheets/bat46.pdf

{{kpnc_tricks_01_Image_1.jpg}}

Рисунок 2 внешний вид диодов Шотки

===== LDE-моддинг =====

Два светодиода на передней панели (один из которых –— power-led — постоянно горит), а другой — HDD LED оживленно мигает — это же настоящая нищета! Разве не интересно заглянуть во внутренний мир компьютера, прицепив светодиод буквально на каждую шину? Например, подключившись в выводу /RAS модуля памяти (115/154 выводы DIMM-слота на SDR/DDR соответственно) мы сможем наблюдать pа переключениями DRAM-страниц оперативной памяти, а 27/63 контакты будут мигать светодиодом при переключении микросхемы из режима чтения в режим записи! Достаточно взять в руку схему материнской платы (схемы рефересных плат бесплатно раздаются с сайта Intel) и через несколько минут наш PC превратится в рождественскую елку! Кстати, при выявлении причин сбоев это очень помогает.

Вот только напрямую подцеплять светодиоды ни в коем случае нельзя! Ну уже хотя бы потому, что шины и так работают на пределе и при попытке их удлинения, все падает в тартарары. Приходится хитрить, воспользовавшись, операционным усилителем, таким например как, LM358, который легко содрать с любой матери, видео-карты или купить на рынке. Вот его даташит: http://www.ensc.sfu.ca/reference/data-sheets/LM358.PDF, а вот типовая схема подключения (см. рис 3).

{{kpnc_tricks_01_Image_2.png}}

Рисунок 3 схема подключения дополнительного светодиода

Каждая микросхема LM358 включает в себя целых два операционных усилителя, а значит, что она может обслуживать сразу два независимых светодиода. Сама микросхема монтируется прямо на материнскую плату, непосредственно на интересующий нас вывод, а светодиод может быть выведен гибким шнуром на переднюю панель или даже в соседнюю комнату.

Незадействованные усилители легким движением руки превращаются в тактовые генераторы (см. рис. 4) и подключенные к ним светодиоды будут монотонно мигать, имитируя работу сердца.

{{kpnc_tricks_01_Image_3.png}}

Рисунок 4 пульсовый генератор на LM358

На самом деле, приведенная схема очень условна. Во-первых, не всегда на интересующем нас выводу будет положительный уровень, поэтому порядок подключения + и - приходится определять либо "по науке" (сверясь со схемой), либо "экспериментально" (если подсоединить неправильно ничего не сгорит, просто светодиод моргать не будет). Во-вторых, работа компьютера после такого варварского вмешательства рискует стать нестабильной, так что на высоких частотах ее лучше не применять.

Правильное решение (выдернутое из схемы на материнскую плату Intel 100 MHzPentium(tm) IIprocessor/440BX) выглядит так (см. рис. 5). Проверено — оно работает и на более высоких частотах, вплоть до Pentium-4.

{{kpnc_tricks_01_Image_4.png}}

Рисунок 5 "правильная" схема подключения контрольных светодиодов от Intel

Основной всего служит штучка 74ALS08 (вот ссылка на даташит http://www.standardics.philips.com/products/als/pdf/74als08.pdf). Это так называемый "Quad 2-input AND gate" (2х входной И - вентиль, в количестве 4х штук в одном корпусе), со свитой резисторов и конденсаторов, подавляющих помехи. Как и следует из его названия, он обслуживает две "контрольных" точки, выводимые на один-единственный светодиод. Все детали легко содрать с любой платы, таким их просто — табун, так что на рынок идти совершенно необязательно.

Главное — запастись светодиодами. Яркими и, желательно, разноцветными (для увеличения яркости в J28 можно "воткнуть" вышеописанный операционный усилитель).

===== два цвета в одном =====

На многих материнских платах расположен светодиод, горящий в рабочем режиме одним цветом, а в ждущем — другим. Светодиод, расположенный на лицевой панели некоторых системных блоков, обычно ведет себя точно также, но... "обычно" это еще не всегда (у старых системных блоков вообще никогда).

На самом деле этой беде легко помочь! В большинстве случаев даже не понадобиться трогать паяльник! Рассмотрим типовую схему подключения POWERLED'а (см. рис. 6)

{{kpnc_tricks_01_Image_5.png}}

Рисунок 6 типовая схема подключения PowerLED'а

На плате (ONBOARD) расположен двухцветный (DUAL-COLOR) светодиод. Ну это такой специальный светодиод, содержащий два LED'а в одном флаконе. Выбор нужного цвета осуществляется полярностью. Параллельно ON-BOARDLED'у расположен CHASSISPOWERLED, что в переводе на русский язык означает "светодиод, выведенный на корпус". То есть, все необходимые ингредиенты у нас уже есть!

Способ номер один — выкусываем старый светодиод с лицевой панели и ставим на его место новый DUAL-COLOR, который можно взять со старой платы или в магазине. Все! Теперь он будет светиться двумя разными цветами! Способ номер два — подключаем к старому светодиоду еще один светодиод другого цвета и другой полярностью (минус этого решения в том, что придется дырявить лицевую панель, что не есть хорошо, а впрочем... так даже красивее).

===== когда индикатор лжет =====

Невероятно, но факт, HDD LED на самом деле отображает активность шины IDE и подмигивает любому ATA/ATAPI устройству (например, DVD-приводу или CD-ROM), что вносит дикую путаницу в процесс и нервирует начинающих пользователей, иногда даже сдающих компьютер в ремонт. Против схемотехники, конечно, не попрешь, но мы знаем как быть!!!

{{kpnc_tricks_01_Image_6.jpg}}{{kpnc_tricks_01_Image_7.jpg}}

Рисунок 7 HDD индикатор на самом деле отражает активность всех ATA/ATAPI устоойств

Разносим HDD и CD-ROM/DVD-ROM по разным шлейфам (если не сделали этого сразу), берем в руки лупу и, вооружившись омметром, ищем куда идет питающий вывод IDE-LED'а (противоположный тому, что подключается к массе). Рано или поздно мы "врежемся" в микросхему 74ALS08 или нечто подобное ей (см. рис. 5). Глотнув винца для храбрости, аккуратно перерезаем 2й вывод микросхемы (или отпаиваем его, удаляя припой отсосом или обыкновенной медицинской иглой — иглы для капельниц предпочтительнее).

С этого момента HDDLED будет подмигивать только одному IDE-каналу, на котором размещен жесткий диск, игнорируя второй с CD-ROM'ом. Главное не перепутать каналы! Впрочем, этот процесс легко обратим и отпаянный вывод можно припаять вновь.

===== реанимация USB-портов, мыши и клавиатуры =====

USB-порты мрут как мухи, особенно когда к ним через разветвитель подключается несколько мощных устройств, с которыми они уже не справляются. К счастью, на современных компьютеров количество USB портов обычно достигает четырех - шести и смерть одного из них, это конечно же трагедия, но все-таки не приговор. Если материнская плата еще на гарантии можно попытаться отнести ее в ремонт (только вас могут развернуть, придав для скорости пинка).

Расследование, проведенное мыщъх'ом показало, что в подавляющем большинстве случав "горит" не сам порт, а предусмотренный мудрыми конструкторами плавкий предохранитель, который легко найти, если двигаться вдоль печатной магистрали от первого вывода USB-разъема (VCC) в глубину материнской платы. Предохранитель обозначается латинской буковой F и по обыкновению соседствует с резисторами и конденсаторами (см. рис 8). Прозвоните его омметром — если он покажет обрыв, с некоторым риском предохранитель можно просто перемкнуть, хотя правильнее заменить его таким же точно или аналогичным, рассчитанным на ток 1,5 - 2,0 A. Чаще всего после этой несложной операции USB "оживает".

{{kpnc_tricks_01_Image_8.png}}

Рисунок 8 предохранители, охраняющие USB-порты на плате F1 и F2

Аналогичные предохранители защищают мышь и клавиатуру от неправильного включения и еще кое от чего (см. рис. 9). Как-то раз мыщъх'ный друг включил старый-старый джойстик, оставшийся от компьютера ZX-Spectrum, в клавиатурный DIN-разъем. Думал поиграть! Поиграть не получилось, а клавиатура, увы, умерла. К счастью, весь предохранитель принял весь удар на себя (номинальный ток 1,35A), после замены которого клавиатура ожила и компьютер заработал как не бывало!

{{kpnc_tricks_01_Image_9.png}}

Рисунок 9 предохранители, охраняющие клавиатуру и мышь


