====== silent-server ======
<sub>{{silent-server.odt|Original file}}</sub>

====== бесшумный сервер своими руками ======

крис касперски, ака мыщхъ, no-email

**развитие локальных сетей и ****DSL-****соединений привело к росту популярности домашних серверов, многие из которых из-за хронического недостатка жилищного пространства приходится устанавливать прямо в местах обитания их владельцев, что неизбежно сталкивает их с шумовой проблемой. современный компьютер — достаточно шумная штука. существует множество методик борьбы с шумом, но далеко не все из них эффективны…**

===== введение или что там грохочет внутри =====

Прежде чем бороться с шумом, нужно выявить его основные источники, перечисленные ниже в порядке убывания своей "активности" (естественно, этот порядок весьма условен и зависит от множества обстоятельств, с которыми мы разберемся чуть позже, а сейчас просто составим приблизительный список, чтобы очертить фронт работ):

  - жесткие диски;
  - вентилятор на процессорном радиаторе;
  - вентиляторы на видео-карте, чипсете и т. д.;
  - вентилятор на блоке питания и прочие вентиляторы внутри корпуса ПК;
==== жесткие диски ====

С переходом на гидродинамические подшипники (Fluid Dynamic Bearing — FDB) жесткие диски перестали быть самым шумным компонентом ПК и единственным "грохочущим" элементом осталась сервосистема (она же система позиционирования магнитной головки). Но производители активно работают в этом направлении и большинство современных винчестеров предусматривают несколько режимов работы: от "тормозного, но бесшумного" до "грохочущего, но высокопроизводительного". По умолчанию, обычно выбирается промежуточный компромиссный вариант, который легко изменить, скачав с сайта производителя специальную утилиту (у всех производителей она разная).

{{silent-server_Image_0.png}}

Рисунок 1 устройство гидродинамического подшипника

Серия Barracuda от Seagate относится к самым надежным и малошумным моделям. Остальные фирмы в этом отношении намного менее продвинуты. В частности, Maxtor'ы страдают хронической течью гидродинамических подшипников, проливая ферромагнитную жидкость на поверхность одного из "блинов" где она постепенно запустевает, необратимо разрушая хранящиеся на диске данные.

{{silent-server_Image_1.jpg}}

Рисунок 2 Barracuda от Seagate — не только тихая, но еще и самая надежная модель из всех

Несколько дисков, установленных в одну стойку, могут входить в резонанс, изучая целый спектр звуков всех частот. Обычно это низкочастотный гул, реже — инфразвуковые колебания, не воспринимаемые человеческим ухом, но вызывающие быструю утомляемость, чувство тревоги и прочий дискомфорт. В нормальной стойке должны использоваться резиновые прокладки, не допускающие прямого контакта стойки с корпусом жесткого диска. Некоторые производители используют пружинные или резиновые растяжки, что уменьшает шум и гарантированно предотвращает резонанс, но вместе с этим сокращают срок службы жесткого диска, рассчитанного на жесткий монтаж, а не на "болтанку".

Как вариант, можно установить один жесткий диск в 3" отсек, а другой — в 5", но при этом возникает проблема с охлаждением, а жесткие диски, работающие в круглосуточном режиме, настоятельно рекомендуется охлаждать. Естественно, чем больше вентиляторов — тем больше шума. Поэтому, закрепляем винчестеры в одной стоке, обдуваемой большим "тихоходным" вентилятором с кривыми (а не рубленными) лопастями, нагнетающий воздух внутрь корпуса ПК. Естественно, на лицевой стенке должна быть предусмотрена решетка, а если ее нет, то вентилятор следует отодвинуть от корпуса хотя бы на 3 –5 см для возможности подсоса воздуха. Подшипники скольжения (состоящие из простой втулки) работают намного тише шарикоподшипников, хотя имеют намного меньший ресурс. Постепенно втулка разбивается и вентилятор начинает тарахтеть как гусеничный экскаватор. Смазка подшипника веретенным маслом на некоторое время решает проблему, но прилипающая к ней пыль служит хорошим абразивом, в результате чего износ резко возрастает и вентилятор начинает тарахтеть вновь, требуя замены.

Кстати говоря, известно несколько случаев, когда принудительное охлаждение жестких дисков не только не увеличивало срок их службы, но и приводило к скоропостижным отказам. Все просто! От неравномерного охлаждения корпус винчестера чуть-чуть "ведет" (тепловое расширение помним, да?), вызывая перекос некоторых узлов со всеми вытекающими отсюда последствиями.

Другая коварная штука — S.M.A.R.T – система диагностики и самоконтроля. Польза от нее довольно сомнительна, а вот вред она приносит немалый. По совершенно непонятной причине практически все производители размещают S.M.A.R.T-протоколы (постоянно обновляемые жестким дисков) рядом со служебной зоной, хранящей прошивку, адаптивные характеристики и другие жизненно важные для работы винчестера данные. Существует угроза, что в результате вибраций или по каким либо другим причинам, головка "промахнется" и запишет очередную порцию SMART-лога в служебную зону, после чего жесткий диск перестанет определяется BIOS и для его восстановления потребуется помощь специалистов. Хуже всего, что в микрокоде некоторых винчестеров имеются ошибки, приводящие к "переполнению" log'а и затиранию служебной области. Впрочем, к шуму эта тема не имеет никакого отношения, так что вернемся к нашим баранам.

==== процессор ====

Начиная с 80486 процессоров на радиаторах начали появляться вентиляторы, а на Pentium'ах это явление приобрело массовый характер. Современные процессоры выделяют огромное количество тепла, для эффективного отвода которого используются высокоскоростные вентиляторы, "прокачивающие" множество кубических сантиметров воздуха, что естественно сопровождается шумом. Но ведь домашнему серверу не требуется мощный процессор!!! Самый радикальный метод борьбы с шумом — перевести процессор на пассивное охлаждение, то есть убрать вентилятор.

В свое время фирма Cyrix выпустила несколько удачных процессоров, в спецификации которых пассивное охлаждение декларировалось явно. И хотя они не могли похвастаться особой производительностью, для нормальной работы офисных приложений их вполне хватало, но… конкурировать с Intel/AMD фирме Cyrix оказалось не по силам и она продала свой бизнес компании VIA (http://www.via.com.tw/en/products/processors/), которая слегка пересмотрела спецификации и "прикрутила" активное охлаждение, которое процессорам семейства С3 (другие мыщъх не тестировал) совершенно ни к чему. Судите сами. При максимальной (по спецификациям) допустимой температуре в 85°С и жарком климате местообитания мыщъх'а (до 42°С и выше), на массивном медном радиаторе температура процессора, работающего под управлением Windows 2000, никогда не превышала 55°С, оставляя достаточный запас "прочности".

{{silent-server_Image_2.jpg}}

Рисунок 3 VIA C3 (бывший Cyrix C3 Ezra) – один из немногих процессоров, способный работать с пассивным охлаждением

Тоже самое относится и к Pentium-III 733 MHz (Coppermine). Правда, более быстрые модели уже приходится тормозить, уменьшая тактовую частоту и напряжение питание. Снижать питающее напряжение без уменьшения тактовой частоты нельзя, поскольку чем ниже разность потенциалов, тем медленнее выполняются переходные процессы и электронные ключи просто не успевают переключиться за отведенный им такт.

{{silent-server_Image_3.png}}

Рисунок 4 температура Pentium-III 733, установленного внутри мыщъхиного сервера на медный радиатор с пассивным охлаждением (для справки температура воздуха составляет 28°С)

На худой конец (если температура кристалла все-таки приближается к опасному уровню) можно закрепить поблизости от радиатора тихоходный вентилятор с большими лопастями.

А вот водяное охлаждение использовать не рекомендуется. И не только потому, что существует угроза утечки охлаждающей жидкости (как правило, воды), ведущей к отказу электроники, а в некоторых случаях — даже локальным возгоранием и пожарам. Помпа далеко не бесшумна, к тому же достаточно часто выходит из строя, что опять-таки приводит к перегреву и выходу сервера из строя.

Zalman имеет в своем ассортименте несколько моделей пассивных радиаторов, пригодных даже для охлаждения Penium-4, и основанных на кипении жидкости в герметично запаянных трубочках, однако, их стоимость довольно велика, да и смысла строить домашний сервер на базе Penium-4 никакого нет. Лучше использовать технику, оставшуюся после "апгрейда" своей основной системы.

{{silent-server_Image_4.jpg}}

Рисунок 5 пассивный радиатор от Zalman

==== северный мост, видео-карта и все-все-все остальные ====

Материнская плата с активным охлаждением северного моста (равно как и видео-карта с закрепленным на ней вентилятором) это ужас (только не тихий, а весьма громкий) и потому идет нах… то есть лесом. Северный мост, конечно, очень горячее место, но все же не настолько, чтобы к нему прикреплять вентилятор, а видео-карта серверу и вовсе не нужна! То есть нужна, конечно (особенно, если это Windows-сервер), но 3D-устроитель будет явным излишеством. Будьте проще!!!

А вот от интегрированного видео лучше все-таки воздержаться, особенно, если оно запихнуто в серверный мост, который и без того перегружен. Даже при выключенном мониторе, интегрированное видео продолжает работать, грея северный мост и завешивая его в жаркую погоду при загрузке Windows. Проблема решается, либо установкой более мощного радиатора (зачастую с активным охлаждением), либо выключением интегрированного видео в BIOS'е и переходе на нормальную карту.

==== блок питания ====

"Родные" вентиляторы блоков питания обычно испускают достаточно много шума, имеют рубленные лопасти и высокие обороты. ОК, покупаем блок питания с запасом по мощности, устанавливаем в него вентилятор с выгнутыми "аэродинамическими" лопастями и снижаем обороты до минимума (о том как это сделать рассказывается в соответствующей врезке). Вентилятор, нагнетающий воздух внутрь блока питания, охлаждает его намного эффективнее, чем родной вентилятор, придерживающийся ATX-спецификации и работающий на "выдув".

Правда, при этом возникает следующая проблема. При нагнетании воздуха в корпус сразу с двух сторон (со стороны блока питания и стойки с жесткими дисками), внутри возникает повышенное давление, снижающее эффективность системы охлаждения. Можно, конечно, установить третий вентилятор, работающий на выдув, но к чему нам лишний шум?! Проще установить перегородку, между дном блока питания и материнской платой, доходящую до 5" отсека со снятой декоративной крышкой, на место которой можно установить решетку (а можно и не устанавливать). Таким образом, мы разделяем воздушные потоки друг от друга, не давая им смешиваться. Воздух, нагнетаемый внутрь блока питания, проходит поверху корпуса, выходя через 5" отсек, а воздух, охлаждающий винчестеры, выходит через щели в боковых стенках корпуса. И все остаются довольны.

Еще одно обстоятельство. Импульсные блоки питания (а других сейчас нет) могут генерировать высокочастотные колебания (писк, свист), которые лежат за пределами восприятия взрослого уха (музыкантов и меломанов мы в расчет не берем), но отчетливо воспринимаются детьми. Так что, если ваш ребенок жалуется на сервер, утверждая, что слышит звуки, которых не слышите вы, вместо того вести его к психиатру, просто замените блок питания. Тоже самое относится и к дросселям, установленным на материнской плате. Длительное воздействие ВЧ-колебаний отрицательно сказывается как на психику (особенно, еще не окрепшую), так и на всем здоровье в целом, поэтому, отмахиваться от этой проблемы не стоит.

Хорошо, а как быть тем, у кого нет детей, а по ушам потоптался медведь? Хороший вопрос! А вместе с ним — веский повод их завести. Детей в смысле. Ну… или хотя бы "одолжить" на время у знакомых.

==== корпус ====

Китайские корпуса, собранные из тонкого металла на заклепках (половина из которых незатянута) дребезжат всеми своими частями, усиливая вибрации жестких дисков и вентиляторов. Чем толще металл, тем тише корпус, особенно если высверлить заклепки, заменив их гайками с болтами. Жестяные декоративные заглушки, удерживаемые одними силами трения, лучше посадить на двухсторонний скотч, лишив их возможности издавать мерзкие звуки раз и навсегда.

Боковые стенки так же лучше посадить на болты, не давая им возможности болтаться, а сам корпус оклеить изнутри гофрированным картоном (оставляя открытыми лишь вентиляционные отверстия), или другим шумопоглощающим материалом, который можно приобрести, например, в автомагазине. Конечно, это существенно снизит теплоотдачу, увеличивая температуру внутри корпуса, но для больших корпусов это не проблема. Избыток свободного пространства не позволяет температуре приближаться к опасной отметке. Впрочем, все решает эксперимент. Современные материнские платы снабжены как минимум одним-двумя термодатчикам, позволяющих вести круглосуточный мониторинг.

Некоторые предпочитают оборачивать корпус пенопластом снаружи, но это плохая идея и вот почему. При оклеивании корпуса гофрированным картоном изнутри, мы гасим звуковые волны до того, как они дойдут до стенок, резонирующих в такт с шумом и многократно усиливающих его уровень, от которого не спасает даже расположенный сверху пенопласт. Впрочем, учитывая, что часть источников шума прикручена к корпусу и передает колебания непосредственно через металл, минуя воздушную среду (и наш картон), дополнительный уровень защиты в виде пенопласта отнюдь не помешает. Главное не забывать про вентиляционные отверстия, отступая от них хотя бы на несколько сантиметров, т. к. через узкую пенопластовую "шахту", вырезанную по размеру отверстий, воздух циркулирует с большой неохотой.

Еще есть такая штука, как деревянные корпуса (между прочим, очень даже модные в последние время!). Они великолепно гасят шумы, однако, требуют установки нескольких вентиляторов для эффективной циркуляции воздуха, особенно если процессор переведен на пассивное охлаждение. Весь фокус в том, что дополнительные вентиляторы (естественно, низко оборотистые) следует размещать //**в глубине корпуса**//, тогда наружу вместо шума вырвется лишь слабый шелест.

===== заключение =====

Проблемой снижения шума мыщъх впервые озаботился при переходе с Pentium-II на Pentium-III. Посадив кристалл на "крутой" (по тем временам) радиатор "Golden Orb", мыщъх был буквально ошеломлен… но не скоростью работы, а громкостью шума и вибрацией корпуса. Смутно представляя себе возможность творческой работы в таких условиях, мыщъх начал экспериментировать с радиаторами разных фирм, а увидев datasheet на процессор Cyrix C3 Ezra, сразу же проникался к нему любовью.

Вот так, снижая шумность компонентов одного за другим, мыщъх добился, что компьютер (даже с открытой крышкой) перестал быть слышим вообще!

===== >>> врезка как затормозить вентилятор =====

Зависимость уровня шума от частоты оборотов очень сложная (и к тому же находящаяся в сильной зависимости от конструктивных особенностей конкретной модели вентилятора), но из самых общих рассуждений понятно, чем ниже обороты, тем меньшее сопротивление оказывает воздушный поток, ниже биения несбалансированной крыльчатки и т. д. При частоте порядка 1.000 оборотов в минуту большинство вентиляторов практически не шумят, но уже при 2.000 —3. 000 оборотах в минуту шум становится буквально невыносимым, что и неудивительно, т. к. объем перекачиваемого воздуха пропорционален частоте оборотов, а шум — частоте в пятой степени. Следовательно, частоту оборотов нужно снижать. А как?

Большинство современных материнских плат снабжено функций Smart Fan Control, меняющих частоту вращения вентилятора в зависимости от температуры специального датчика. Некоторые платы (как, например, EPOC) имеют внешний датчик (termostick) исвободное Smart Fan Control гнездо, в которое можно подключить вентилятор от блока питания.

Если же такого гнезда нет, можно воткнуть резистор номиналом 30 — 100 ом (нужная величина подбирается экспериментального) в цепь питания вентилятора (красный провод, расположенный посередине разъема), при этом следует учитывать, что при пуске вентилятор требует больше тока, чем при работе и потому если "переборщить" с сопротивлением, вентилятор может попросту не запуститься! Поэтому для страховки параллельно резистору следует подключить термистор с обратной характеристикой, приклеенный к процессору. Холодный термистор имеет небольшое сопротивление и потому вентилятор запускается на ура, затем, по мере нагрева процессора, сопротивление термистора возрастет до нескольких килоом и он уже не оказывает на резистор практически никого шунтирующего воздействия. Правда, при кратковременном выключении компьютера (когда радиатор процессора еще не успел остыть) сопротивление термистора по прежнему велико и вентилятор имеет шанс не запуститься. Однако, для серверов эта проблема неактуальная, поскольку их выключают редко, а от бросков по питанию защищает упса.

{{silent-server_Image_5.jpg}}

Рисунок 6 резистор, вставленный в разрыв цепи питания для торможения вентилятора


