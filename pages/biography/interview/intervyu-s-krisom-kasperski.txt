====== Интервью с Крисом Касперски ======

Крис всегда стоял особняком в любой компании: ни на кого не похож, называет себя мыщъхом, глубоко и неординарно мыслит, пишет книги и явно идет по совершенно особенному жизненному пути. То ли программист, то ли исследователь, то ли астроном, то ли писатель. Последние четыре года слышно о нем было немногое, и в общем немудрено, что при первом же удобном случае я отправился в маленький зеленый городок под Вашингтоном поболтать за жизнь и выяснить, чем же Крис занимается и что он делал последнее время.

Настоящее имя Криса — Николай Лихачев.

Неординарные способности Криса помогли его бурной карьере, хотя высшего образования у него, как ни странно, нет.

Автор 13 книг о хакерстве, дизассемблировании, защите и восстановлении данных.

С весны 2010 года проживает и трудится в США.

===== Как все начиналось =====

**Первая иностранная компания, в которой я стал работать, была Endeavor Security.** Устроился я туда вести блог о малвари и сплоитах за 800 долларов в месяц. Кстати, блог доступен до сих пор: [[http://endeavorsecurity.blogspot.com/|endeavorsecurity.blogspot.com]].

**Были сложные времена, и за короткое время компанию покинуло сразу несколько ключевых сотрудников.** Пришло к тому, что работать стало некому, и владелец компании предложил поработать мне, потому что видел, что я соображаю. Кинули меня на реверсинг патчей безопасности. Поскольку компания маленькая, доступа к исходникам винды не было и приходилось на основании патчей учиться детектить еще не существующие эксплойты для дыр, которые пофиксили в патче.

**Это была каторжная работа.** У Майкрософта хотя бы патчи выходят регулярно, изменений не очень много и есть символьные данные. А вот, скажем, в новой версии Оперы пофикcили XSS. Изменений между версиями, понятно, миллион. Пойди-ка найди эту дыру по патчу!

**Я предложил создавать методики автоматизации всего этого.** Когда руководители поняли, что я могу не только реверсить, но и детектить, сказали — давай, будешь девелопером. Стал удаленно работать фрилансером-разработчиком.
===== О переезде =====

**В 2008 году я окончательно понял, что устал жить в России, у меня там нет никаких перспектив, и я озаботился поисками работы в США.** Списался с компанией Macrovision из Сан-Франциско — города моей мечты, и мне начали делать визу. А параллельно я продолжал работать с Endeavor Security.

**Визу мне делали долго: проверяли целый год, потому что консул США в будочке в Москве очень удивился моей истории.** Я ведь честно указал, что работаю в журнале «Хакер» вроде как журналистом, при этом еду в США, чтобы устроиться там программистом.

**Консул мне сказал:** «Так вы программированием не занимались раньше, у вас нет подтвержденного опыта, вам никто не будет делать визу — о чем вы говорите? Это какой-то скам».

**В Америке сильная бюрократия, но это имеет и хорошую сторону:** у него были подозрения, что я какой-то темный тип, но он не мог мне отказать только на основании того, что я ему не понравился. Он просто запустил процедуру проверки всего моего бэкграунда. Короче, почти год мне делали визу! Это при том, что у меня было официальное приглашение от американской компании.

**И значит, приехал я в Сан-Франц, все просто офигенно.** Мне дают три тестовых задания, и все три я, формально говоря, проваливаю. Вернее, я нашел у них ошибки и неточности в формулировках. Например, в первом задании нужно было удалить комментарии в стиле C и C++ из строки без выделения доппамяти. А прототип функции — void, то есть ничего не возвращает. Я говорю: «А если будет ошибка, как о ней сообщать? Единственное, что могу сделать, — это занулить буфер, но это ж я угроблю данные. Меняйте прототип, давайте возвращать код ошибки».

**Еще там в качестве бонуса был вопрос: как удалять комментарии?** Есть тестовая строка, в ней был комментарий в стиле C в define. В Ветхом завете Си Кернигана и Ритчи такой комментарий заменялся пустым местом, использовалось это обычно как хак для склейки двух токенов. А в новом стандарте (уже даже в C89) комментарий заменяется пробелом и склейки, естественно, не происходит.\\
\\
**Мы с ними долго переписывались, и они, видимо, решили, что я по крайней мере обладаю опытом, знаниями и навыками, разбираюсь в древних стандартах** — а значит, начал заниматься программированием давно. Словом, подтвердил свой опыт — я ведь указал 15 лет работы в индустрии!

**А вот третье задание — сломать crack me — я решил немножко не с того бока, с какого они ожидали.** Было там условие: нельзя патчить код. Они имели в виду, что нужно написать кейген. Я практики взлома crack me не имею и понял, что долго буду париться, а мне дали компьютер и сказали — сиди, занимайся.

**Ну я ж в «Хакере» зря что ли работал?** Подумал — ну, написано «нельзя править код», а вот секция данных — это же не код? Там есть захардкоренный ключ, если я его поменяю на мой ключ — я фактически решил задание безо всякой сложной математики, которая предполагалась.

**В общем, сделали мне предложение на 300 000 долларов в год, чему я очень удивился: это сильно выше среднего по рынку.** Потому что среднее предложение в Сан-Франце — это где-то 150–200 кил, а тут 300 предлагают. Столько даже продюсеры многие не зарабатывают.

**Тут же я встретил моего шефа Кристофера Джордана из Endeavor Security, он как раз был в Сан-Франциско с семьей.** Мы сели в кафе и начали беседовать. Я работал тогда на него удаленно и сказал, что увольняюсь, — мол, предложили кучу денег, буду работать на других. Он мне говорит: для нас 300 тысяч — это неподъемно, мы столько никому не платим. Ты же, дескать, у нас вообще числишься удаленным фрилансером на 3000 долларов в месяц, какие 300 штук?! Максимум, на что можешь рассчитывать, — 170 тысяч.

**Босс предложил нанять меня в Endeavor, за свои собственные деньги включить меня в штат.** Дело в том, что они тогда завершали сделку по продаже Endeavor в McAfee, и в этом случае МакАфи уже обязана будет меня трудоустроить внутри себя.

**В общем, передо мной появился выбор: принимать 300 тысяч и Cryptograph Research в Сан-Франциско или ехать в Рестон в лучшем случае на 170 тысяч.** Я решил съездить посмотреть город и офис, чтобы знать хотя бы, из чего выбираю.

**Был у меня обратный билет до Москвы, но я его выкидываю — и собираюсь лететь в Рестон, посмотреть, что к чему.** Хочу купить билет, но выясняется, что моя кредитка американской банковской системой не принимается. Тогда еще у меня была карта от маленького банка в моем селе на Кубани.

**Тут и произошел инцидент, который определил мое место работы.** Мои будущие коллеги отказали мне в простой просьбе: я просил помочь мне и купить билет их банковской картой, предлагая сразу возместить расходы наличными. Все мне отказали! Как мне с такими людьми работать? Ну их на фиг!

**Прилетел я в Вашингтон, с приключениями добрался до Рестона, поселился там в гостинице.** Честно говоря, после Сан-Франца на меня это место произвело неизгладимое впечатление — шок. Там как раз объединяли Endeavor с одним из отделов МакАфи, и была такая теснота в офисе, что ужас. Все сидели в кубиках, и когда мы вдвоем с моим шефом находились в таком кубике, я туда целиком не влезал :). Потусовавшись немного в офисе МакАфи, я поспешил убраться домой в Россию. Такой сильный был контраст с Сан-Франциско! В общем, уехал я со смешанными чувствами.

**Еще была у меня возможность работать в Panda Security в Бильбао, но сильно не устроили два момента.** Во-первых, в контракте был двухгодичный запрет на работу в любой другой компании, которая занимается антивирусными технологиями, если revenue от их продажи превышает 5%. По сути, под этот фильтр попадает почти любая крупная IT-компания. Ну и второй момент — половину зарплаты (а предложили 75 тысяч евро в год) отдавать на жилье, добираясь до работы на метро. Не круто.

**Потом была Корея, куда я ездил c докладом на Codegate 2009.** Там я познакомился с президентом компании Soft Forum — если сравнивать, это как «Лаборатория Касперского» в России или МакАфи в Штатах. Он пригласил меня на работу, но что-то не пошло: сначала я долго боролся с HR-отделом, который настаивал, чтобы я сбрил бороду и постригся, а потом я просто понял, что будет очень сложно жить в языковой изоляции — по-английски в Корее никто не говорит. В общем, уехал.

**Были еще другие варианты: Иран, Южная Африка, Германия.** Подумав, я решил все-таки вернуться в Рестон. К тому моменту уже начал ощущать ностальгию по городу, интуиция подсказывала ехать именно туда.

**Поскольку у меня нет высшего образования, делать обычную рабочую визу мне было нельзя.** Оставалось два варианта: виза L-1 (трансфер внутри компании) либо O-1 — виза для людей с выдающимися способностями. Ее обычно оформляют всяким нобелевским лауреатам. Чтобы сделать L-1, мне надо было год работать в московском офисе McAfee, к чему я не стремился. В описании O-1 была сноска: также виза применяется для людей, у которых есть научные монографии. Я сказал юристам: давайте это сделаем, я же написал кучу книг и статей. Впрочем, сами книги и статьи не имеют никакого веса, если на них нет ссылок в авторитетных источниках. А ссылки, кстати, были — в том числе на сайте Госдепа США.\\
\\
**Но и ссылок недостаточно, самое главное, что нужно, — это письма и референсы** от уже признанных и известных в индустрии людей. В общем, в связи с этими референсами я сразу понял, кто мне друг, а кто нет.

**Большинство моих друзей работали на конкурентов, а письмо должно быть на фирменном бланке, заверено печатью, подписью и все такое.** Ну и мне многие отвечали: понимаешь, ты едешь к конкурентам, и наше руководство не сильно радо тебе помогать. В общем, пока я занимался этими письмами, компания все же решила меня трансфернуть по визе L-1.

**Как меня принимали в московский офис — это отдельная история.** Во-первых, в Москве слегка офонарели, когда узнали, что моя зарплата у них будет больше, чем у всех сотрудников, вместе взятых. И конечно, за такие деньги они хотели видеть меня в офисе каждый день, а я жить в Москве не хотел. В итоге удалось убедить их, что я буду работать удаленно из села Успенского, получая при этом американскую зарплату через московский офис.

**Впрочем, нормально работать было невозможно — мой дом не охраняется, никакого доступа к исходникам и реальным проектам я получить не мог.** Вдруг просто физически украдут компьютеры? В общем, начал я тосковать по США и отправился вопреки воле руководства в Рестон, вникать в делопроизводство и знакомиться с коллегами.

**Начальство было недовольно** — во-первых, у меня обычная бизнес-виза, соответственно, работать я не могу, плюс все время, которое я нахожусь в США, добавляется к тому году, который мне надо было трудиться в России. Но я чуял, что все делаю правильно.

**Меня несколько раз пытались отправить и отправляли назад в Россию, но каждый раз с этим были сложности:** то забастовка British Airways, то жуткий снегопад в Штатах, то извержение вулкана. Бог был на моей стороне. Каждый раз после такой «депортации» я чувствовал ностальгию, впадал в депрессию и возвращался назад в США. Хотел изменить свою жизнь немедленно. Доходило до того, что охранники компании конвоировали меня в аэропорт :).

**И вот как-то раз я окончательно затосковал и решил все сделать прямо здесь и сейчас.** Опять прилетел в США, а моя бизнес-виза истекала уже очень скоро. На границе спрашивают — какая цель поездки? Я отвечаю: «Жить и работать в США. Навсегда». Миграционный офицер прифигел и сказал: «Вы понимаете, если у вас есть скрытые миграционные намерения, я обязан вас не впускать в страну. Вы же свои намерения не скрываете, но у вас бизнес-виза, поэтому впустить я вас тоже не могу! Идите по коридорчику налево к моему начальству».

**В итоге я общался с директором аэропорта IAD.** Он тоже обалдел от моей истории, отшманал по полной программе, но все же впустил в страну — официально на три месяца, рассказав о том, что мне нужно делать, чтобы легализоваться.

**И в результате работы юридического отдела McAfee мне без вылета из страны смогли сделать разрешение на работу сроком на три года.** При этом визы (которая нужна для пересечения границы) у меня уже не было, она истекла. Так что я все-таки решил вернуться в Россию — во-первых, чтобы сделать новую визу, ну и чтобы уже последний раз проститься с близкими и друзьями.

**Но тут получился облом: под Москвой горели леса, экологическая катастрофа — посольство США эвакуировали, визу получить нереально.** В итоге я полетел в Малайзию и сделал американскую визу там. На этом эпопея с документами почти закончилась: виза для въезда в страну есть, разрешение на работу есть. Можно ехать трудиться!
===== О работе в МакАфи =====

**Официально моя должность в компании называется Senior Malware Researcher.** Впрочем, сейчас реверс и анализ малвари для меня — это побочная деятельность. На мне висят реальные новые проекты, которые являются ключевыми для нашего отдела. Я работаю над архитектурой.

**На моем бейдже есть очень унизительный лейбл** — желтым ярко выделено: NOT CITIZEN. Считай, на лбу написано, что я не гражданин США. Тут это много значит. У меня есть большие ограничения по проектам, над которыми я могу работать. Да и вообще по рабочим действиям. Например, мне запрещено официально встречаться с клиентами. Я могу сделать это в кафе, но вот пожать руки в офисе нельзя.

**Пару раз из меня пытались сделать менеджера, чтобы я формировал команду, но всегда это заканчивалось убытками и проблемами.** В конце концов компания отказалась от идеи делать из меня управленца. И слава богу!

**В 2009 году я был признан сотрудником года в глобальном McAfee!** Проявил себя при изучении Operation Aurora. Премию дали, да и с визами это немножко помогло.

**Если хочу поиграться с какой-нибудь дорогой железкой, например за 40 000 долларов, — мне покупают.** Я вижу железо, о котором раньше и мечтать не мог.

**Команда у нас интернациональная.** Со мной работает коллега из ЮАР АР , она веб-дизайнер, но сейчас еще и хакерша. Другая девушка с Тайваня, сирота. Жила всю жизнь в Калифорнии, там же получила образование. Купила дом, будет скоро праздновать новоселье. Мне вот просто интересно, какие шансы у сироты в России получить хорошее образование, мигрировать на другой конец страны и купить там прекрасный дом? Думаю, небольшие.

**Кстати, она знает Linux и редактор vim лучше меня!** И в нем играет, как на пианино, я за ней не успеваю. Ассемблер знает на таком уровне, что вполне может исправлять мои ошибки в рассуждениях и понимает, когда я, например, оговариваюсь.

**Еще со мной работает уникальный человек, который до этого разрабатывал системы подушек безопасности в машинах.** Раньше я думал, что это фигня. Оказалось, там сложнейшая нейронная сеть, сложнейший софт, который, используя кучу факторов, вычисляет в реальном времени целесообразность выброса подушки. Решает сложную задачу по минимизации травматизма. Ведь не в любом ДТП надо выбрасывать подушку, это зависит от миллиона факторов: рост, вес, позиция, ребенок или взрослый в кресле, пристегнут ли ремень, скорость автомобиля, место удара, объект столкновения и так далее. Кстати, у них там все под QNX сделано. Этот мужик меня сейчас реально подбил принести больше ИИ в антивирусную индустрию. Он большой специалист, работать с ним одно удовольствие. Он хорошо мыслит в глобальных категориях, в решении задач реального времени.

**Первый год я держался и работал строго по графику.** Рабочий день окончился — я иду домой отдыхать, гуляю, смотрю фильмы, хожу по барам, встречаюсь с друзьями и девушками. На второй год не выдержал, сорвался и начал опять по ночам работать. Потому что очень увлекаюсь и не могу остановиться.

**Сейчас я меняю позицию в компании с ресерчера на архитектора.** Желания уходить из МакАфи у меня нет, хотя все говорят, что я придурок и идиот, — у меня куча идей, я могу влиться в небольшой стартап и начать делать реально серьезные деньги. Но я доволен своим положением в компании, никого не хочу подводить. Я здесь счастлив.

**Сам я считаю себя слабым девелопером, в России я бы не прошел ни одного собеседования.** Как ресерчер — я вижу пути решения проблем, которые другие люди еще не смогли рассмотреть. Но если брать именно кодинг, то я не очень-то хорош. Большие проекты у меня теряют управляемость: я начинаю со 100 строк, где все отлично, но заканчиваю 10 000 строк, где уже потеряна управляемость, где все надо переписывать.
===== О разнице в менталитете =====

**В России на собеседованиях пытаются потопить, показать, что ты ничего не понимаешь, — чтобы снизить зарплату.** Здесь все наоборот: если видят, что ты специалист, в тебя вцепляются и больше не отпускают, предлагая лучшие условия.

**У нас здесь даже не собеседования, а чаепития.** Идем в кафе, заказываем китайский зеленый чай, беседуем о жизни и решаем, сработаемся мы или не сработаемся. И каждый потом пишет свое мнение начальству. Вопросы типа «Чем отличается полиморфная функция от перекрытой?» тут даже не возникают, их не задают вообще. Это как оскорбление! На первом месте — стремления, желания и амбиции кандидата.

**Бывает мотивация идти вперед, делать что-то новое, изобретать новые технологии.** Это круто! У других мотивация — полезно работать, получать зарплату, основное время уделять семье. Это другая категория людей, такие люди тоже очень нужны — они обычно чрезвычайно исполнительные. Нужны и трудоголики типа меня, которые работают ночью и днем.

**Усвоил важное правило: чем большим я выгляжу дураком, тем мне лучше.** То есть чем строже я к себе отношусь, тем мягче ко мне окружающие. Работает безотказно!\\
Сроки и планирование работы в США принципиально отличаются от российских.Например, при планировании работы с начальством мы обсуждаем не ближайший месяц или два. Здесь мыслят другими категориями: мы думаем, что можно крутого не спеша сделать за три года до прототипа и начать продавать через пять лет. Никакой спешки нет. Нужно три года на ресерч? Без проблем!

**А от русских компаний я слышу такие ужасы, что руки опускаются.** Заставляют делать что-то прямо сейчас, у всех заднее место горит, и все должно быть готово еще вчера, даже если еще не придумали, что делать.

**Как-то раз я накосячил, сделал ошибку в программе, и из-за этого наша компания буквально по часам терпела большие убытки.** Я сразу сказал: «Не нужно меня расстреливать и, пожалуйста, не нужно анальных кар, потому что я не буду ночью спать и все сделаю быстро, мне надо хотя бы тридцать часов».

Мне мой тогдашний менеджер ответил: «Первый день ты просто спишь и думаешь, а дальше работаешь по восемь часов в день и к концу недели сдашь проект. Мы с тобой планируем долгое и плодотворное сотрудничество, поэтому страдать и гробить здоровье ни к чему, ОK?». Меня это поразило.

**В России ведь знаете как: «Я начальник — ты дурак».** В Америке такого нет. Здесь твой начальник — это твой друг и коллега, твой папа. Мой босс, который принял меня в Endeavor Security, — он для меня действительно как второй отец.

**В Штатах никогда не знаешь, кто над кем будет сидеть, мы постоянно меняемся.** Сначала ты босс над кем-то, потом ты подчиненный, потом опять начальник ты. В общем, все стараются выстраивать отношения так, чтобы потом не пришлось за них расплачиваться.
===== О жизни =====

**У нас в Рестоне почти весь город работает в технологических компаниях.** Здесь расположены офисы Intel, Oracle, Microsoft, Google, Symantec и так далее. Почти весь хай-тек тут представлен.

**Кристофер Джордан — мой первый шеф и основатель Endeavour Security — для меня как родной отец.** Он очень многое для меня сделал, я ему очень благодарен. Он хороший программист, католик, прекрасный человек.

**Вице-президент компании по фамилии Барнаби как-то раз устроил мне встречу с Ричардом Кларком — бывшим советником президента США по безопасности.** Он работал с Биллом Клинтоном. Барнаби лично меня с ним свел, и мы с ним долго говорили за безопасность.

**Обама — грамотный мужик.** Недавно толкнул речь о том, что многие важные инфраструктурные объекты типа водяных насосов и компонентов энергосистемы США не проектировались с учетом ИБ-угроз. Он понимает, как сложно расследовать преступления в нашей сфере, даже хищения денег из банков. Будут инвестировать деньги в защиту инфраструктур, будут делать отдельную организацию для борьбы с электронной преступностью с высокими полномочиями.

**Если бы мне предложили работать на компьютерную преступность, например писать трояны, я бы точно отказался, даже когда было мало денег.** Слава богу, никогда не предлагали. Впрочем, когда я еще жил в своем селе, мне предлагали подломать систему учета завезенной сахарной свеклы на местном сахарном заводе. Хотели русские люди тырить свеклу, что поделать. Кстати, сложно было отказаться — те люди не обломались бы и убить меня из-за этой свеклы. Помог приятель, который подсказал, как грамотно все разрулить. Удалось убедить бандитов, что денег не поднимем и быстро спалимся.

**Сейчас в Америке куда ни позвони, везде сначала разговариваешь с автоматическим меню, управление которым осуществляется исключительно голосом.** У меня все еще сильный русский акцент, поэтому робот меня не понимает и первые 15 минут мне приходится говорить что-то типа «апож-апож-апож» до тех пор, пока не сработает исключение и меня не соединят с живым оператором.

**У многих людей здесь настоящие замки.** Например, у моего шефа я насчитал двенадцать ванных комнат. Причем строят обычно такие дома на отшибе: в двух часах езды от города, без коммуникаций. Даже электричество генерируют сами — ставят дизельный генератор и завозят большой запас соляры. Получается все равно дешевле, чем тянуть кабель!

**Негры здесь убойные, негров я люблю!** У них очень сильна клановость и взаимовыручка. Если я дружу с кем-то, то его друзья для меня тоже как братья. Два раза мне натурально помогали с документами. Например, когда только приехал — долго не мог получить SSN из-за какой-то бюрократической проволочки. А без SSN в Штатах не жизнь — ничего сделать нельзя. Ни сотовый телефон нормальный оформить, ни контракт заключить, ни налог уплатить — ничего. В общем, большая проблема. Обмолвился об этом темнокожим друзьям. Те близко приняли к сердцу мою беду, и на следующий же день пятьдесят человек организовали пикет у конторы, которая выдает SSN. Натурально, взяли здание в оцепление живой цепью и никого не выпускали и не впускали больше суток. В США трогать негров и силой разгонять — это почти самоубийство. Все сразу начинают говорить про расовый подтекст, набрасывается пресса. К тому же в полиции работают тоже темнокожие, а они за своих пацанов горой. В общем, через сутки блокады мне выдали SSN!

**У нас в каждом доме есть профессиональный офисный центр с бесплатно доступным оборудованием типа профессиональных принтеров-сканеров.** Еще в каждом доме спортивный зал прекрасный — тоже бесплатный! В парадной у нас консьерж за стойкой, как в гостинице, кресла, кондиционер. Ну где в России такое? Только в элитных дорогущих домах. У меня же дом никакой не элитный, обычное недорогое жилье. Для меня — как замок!

**Со всеми моими приключениями у меня тут уже есть свой личный адвокат, который мне все время помогает.** Кстати, мужик из Украины, что сильно мне облегчает общение. По-английски с юридическими терминами сложно разбираться.

**В Рестоне я чувствую себя как дома.** Здесь у меня есть друзья, которые всегда помогут, здесь у меня есть любимая работа, здесь мне просто очень нравится. Последние года два живу тут безвылазно и никуда переезжать не собираюсь.

